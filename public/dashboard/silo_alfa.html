<!doctype html>
<html>

<head>
    <title>Silo - Kohi Quality</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <link rel="icon" href="../css/style_armazem.css" type="image/x-icon">
    <script src="http://www.chartjs.org/dist/2.7.1/Chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        canvas {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
    </style>
    <link rel="stylesheet" href="../css/style_silo.css">
</head>

<body>

    <div class="aside">
        <div class="container">

            <div class="logo">
                <img src="../assets/LogoKohiPronto.png">
            </div>

            <div class="texto">
                <h2>Olá, <span id="idUsuario"></span></h2>
                <h4 class="mensagem">Bem-vindo(a) ao seu silo</h4>
            </div>

            <div class="buttons">
                <button onclick="">Status</button>
                <button onclick="window.location = 'grafico_alfa.html'">Gráficos</button>
            </div>

        </div>
    </div>

    <div class="dash">

        <div class="header-dash">

            <div class="navbar">
                <ul class="nav">
                    <a href="dashboard.html">
                        <li class="item-menu">Voltar</li>
                    </a>
                </ul>
            </div>

            <div class="nome_armazem">
                <h1>SILO ALFA</h1>
            </div>
        </div>

        <div class="body-dash">

            <div class="container-umidade">

                <div class="area-parametros-alerta">
                    <p class="titulo-legenda">
                        Legenda Umidade
                    </p>
                    <div class="parametros-alerta">
                        <div class="item-regua perigo-frio">
                            <p>Perigo</p>
                            <p>&lt;= 50%</p>
                        </div>
                        <div class="item-regua alerta-frio">
                            <p>Alerta</p>
                            <p>&lt;= 51%</p>
                        </div>
                        <div class="item-regua ideal">
                            <p>Ideal</p>
                            <p>55%</p>
                        </div>
                        <div class="item-regua alerta-quente">
                            <p>Alerta</p>
                            <p>&gt;=59%</p>
                        </div>
                        <div class="item-regua perigo-quente">
                            <p>Perigo</p>
                            <p>&gt;=60%</p>
                        </div>
                    </div>
                </div>


                <div class="umidade">
                    <div class="umidade_atual">
                        <h2>Umidade atual:</h2>
                        <h3>52%</h3>
                    </div>

                    <div class="status_umidade" id="status_umidade">
                        <span id="span_status_umidade"><b>Status de Umidade</b></span><br>
                        <span id="span_umidade"></span>
                    </div>

                </div>
            </div>

            <div class="container-temperatura">
                <div class="area-parametros-alerta">
                    <p class="titulo-legenda">
                        Legenda Temperatura
                    </p>
                    <div class="parametros-alerta">
                        <div class="item-regua perigo-frio">
                            <p>Perigo</p>
                            <p>&lt;=10ºC</p>
                        </div>
                        <div class="item-regua alerta-frio">
                            <p>Alerta</p>
                            <p>&lt;=12ºC</p>
                        </div>
                        <div class="item-regua ideal">
                            <p>Ideal</p>
                            <p>22°C</p>
                        </div>
                        <div class="item-regua alerta-quente">
                            <p>Alerta</p>
                            <p>&gt;=21ºC</p>
                        </div>
                        <div class="item-regua perigo-quente">
                            <p>Perigo</p>
                            <p>&gt;=24°C</p>
                        </div>
                    </div>
                </div>

                <div class="temperatura">

                    <div class="temperatura_atual">
                        <h2>Temperatura Atual:</h2>
                        <h3>20ºC</h3>
                    </div>

                    <div class="status_temperatura" id="status_temperatura">
                        <span id="span_status"><b>Status de Temperatura</b></span><br>
                        <span id="span_temperatura"></span>
                    </div>

                </div>
            </div>

        </div>

</body>

</html>

<script>

    idUsuario.innerHTML = sessionStorage.NOME_USUARIO;

    var temp_atual = 25;
    var umid_atual = 59;

    if (temp_atual < 10) {
        span_temperatura.innerHTML = "<b>TEMPERATURA ABAIXO DO RECOMENDADO</b>"
        status_temperatura.style = `background-color: #CA4224;`;
    } else if (temp_atual <= 12) {
        span_temperatura.innerHTML = "Fique atento, a temperatura está abaixando"
        status_temperatura.style = `background-color: #E9500F`;
    } else if (temp_atual <= 21) {
        span_temperatura.innerHTML = "Fique atento, a temperatura está subindo"
        status_temperatura.style = `background-color: #E9500F`;
    } else if (temp_atual > 23) {
        span_temperatura.innerHTML = "<b>TEMPERATURA ACIMA DO RECOMENDADO</b>"
        status_temperatura.style = `background-color: #D72418`;
    }

    if (umid_atual < 50) {
        span_umidade.innerHTML = "<b>UMIDADE ABAIXO DO RECOMENDADO</b>"
        status_umidade.style = `background-color: #D72418`;
    } else if (umid_atual <= 51 && umid_atual >= 52) {
        span_umidade.innerHTML = "Fique atento, a umidade está abaixando"
        status_umidade.style = `background-color: #FD8211`;
    } else if (umid_atual >= 59 && umid_atual <= 60) {
        span_umidade.innerHTML = "Fique atento, a umidade está subindo"
        status_umidade.style = `background-color: #FD8211`;
    } else if (umid_atual > 60) {
        span_umidade.innerHTML = "<b>UMIDADE ACIMA DO RECOMENDADO</b>"
        status_umidade.style = `background-color: #D72418`;
    }

    var contextoDht11Umidade = document.getElementById('dht11Umidade').getContext('2d');
    contextoDht11Umidade.canvas.width = 1000;
    contextoDht11Umidade.canvas.height = 300;
    Chart.defaults.backgroundColor = '#2E1402';
    Chart.defaults.borderColor = '#2E1402';
    Chart.defaults.fontcolor = '#2E1402';

    var dht11Umidade = new Chart(
        contextoDht11Umidade,
        {
            type: 'line',
            data: {
                labels: ['12:00', '13:00', '14:00', '15:00', '16:00', '17:00'],
                datasets: [{
                    label: 'Temperatura',
                    data: [30, 29, 28, 25, 22, 23],
                    borderColor: ['#6aa0b9'],
                    backgroundColor: ['#6aa0b9']
                }]
            },
            options: {
                scales: {
                    xAxes: [{
                        distribution: 'series',
                        ticks: {
                            beginAtZero: true
                        }
                    }],
                    yAxes: [{
                        scaleLabel: {
                            display: true,
                            labelString: 'Temperatura'
                        },
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                },
                animation: {
                    duration: 0
                }
            }
        }
    );

    var contextoDht11Temperatura = document.getElementById('dht11Temperatura').getContext('2d');
    contextoDht11Temperatura.canvas.width = 1000;
    contextoDht11Temperatura.canvas.height = 300;
    var dht11Temperatura = new Chart(
        contextoDht11Temperatura,
        {
            type: 'line',
            data: {
                labels: ['12:00', '13:00', '14:00', '15:00', '16:00', '17:00'],
                datasets: [{
                    label: "Umidade",
                    data: [65.1, 65.8, 66.2, 65.4, 65.2, 65.9],
                    borderColor: ['#ff3232'],
                    backgroundColor: ['#ff3232']
                }]
            },
            options: {
                scales: {
                    xAxes: [{
                        distribution: 'series',
                        ticks: {
                            beginAtZero: true
                        }
                    }],
                    yAxes: [{
                        scaleLabel: {
                            display: true,
                            labelString: 'Umidade'
                        },
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                },
                animation: {
                    duration: 0
                }
            }
        }
    );

    let divVisivel = false; // Variável para controlar o estado da div

    function toggleDiv() {
        const minhaDiv = document.querySelector('.legenda'); // Seleciona a div
        const toggleButton = document.getElementById('toggleButton'); // Seleciona o botão

        if (divVisivel) {
            minhaDiv.style.height = '0'; // Recolhe a div se estiver visível
            toggleButton.classList.remove('expandido'); // Remove a classe 'expandido' do botão
        } else {
            minhaDiv.style.height = '600px'; // Expandir a div se estiver recolhida
            toggleButton.classList.add('expandido'); // Adiciona a classe 'expandido' ao botão
        }
        divVisivel = !divVisivel; // Inverte o estado da div
    }


</script>